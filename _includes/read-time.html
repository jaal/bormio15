{% assign words_per_minute = site.words_per_minute | default: 200 %}

{% if post.read_time %}
  {% assign words = post.content | strip_html | number_of_words %}
{% else %}
  {% if page.read_time %}
    {% assign words = page.content | strip_html | number_of_words %}
  {% endif %}
{% endif %}

{% comment %}Determine current language from page or post{% endcomment %}
{% assign current_lang = page.lang | default: post.lang | default: site.default_lang | default: "pl" %}

{% comment %}Select appropriate translation set{% endcomment %}
{% if current_lang == "en" %}
  {% assign t = site.data.theme.t_en %}
{% elsif current_lang == "de" %}
  {% assign t = site.data.theme.t_de %}
{% else %}
  {% assign t = site.data.theme.t %}
{% endif %}

{% if words < words_per_minute %}
  ~1 {{ t.min_read | default: 'min read' }}
{% else %}
  {{ words | divided_by:words_per_minute }} {{ t.min_read | default: 'min read' }}
{% endif %}
